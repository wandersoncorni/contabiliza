(()=>{let e=null;document.addEventListener("DOMContentLoaded",(()=>{fetch("sanctum/csrf-cookie",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then((t=>{e=document.cookie.split("XSRF-TOKEN=")[1]}))})),document.querySelector("#login-form").addEventListener("submit",(async e=>{e.preventDefault(),fetch("/api/v1/login",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:document.getElementById("email").value,password:document.getElementById("password").value})}).then((async e=>{if(419==e.status)return void fetch("/csrf-token",{method:"GET",headers:{Accept:"application/json"}}).then((async e=>{const t=await e.json();document.querySelector('meta[name="csrf-token"]').setAttribute("content",t.token),document.querySelector('#login-form [type="submit"]').click()}));const t=await e.json();t.error?Swal.fire({icon:"error",title:"Erro",text:t.error}):window.location.href="/"})).catch((e=>console.error("Erro:",e)))})),document.querySelector("#show_password").addEventListener("change",(function(){const e=document.querySelector("#password");this.checked?e.type="text":e.type="password"})),document.querySelector("#show_password").checked=!1,document.querySelector("body").addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),document.querySelector("[type=submit]").click())}))})();